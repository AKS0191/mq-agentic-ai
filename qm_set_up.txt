
crtmqmq QMAPP
strmqm QMAPP

DEFINE LISTENER(LISTENER) TRPTYPE(TCP) PORT(1515) CONTROL(QMGR) REPLACE
START LISTENER(LISTENER)
DEFINE CHANNEL(QMAPP.SVRCONN) CHLTYPE(SVRCONN)
DEFINE QLOCAL(Q1)
DEFINE QMODEL(DEV.APP.MODEL.QUEUE) DEFTYPE(TEMPDYN) DEFPRESP(SYNC) DEFPSIST(NO) QDPHIEV(DISABLED) MAXDEPTH(5000) MSGDLVSQ(PRIORITY) DEFSOPT(SHARED) REPLACE
sudo /usr/sbin/useradd -m -N -c "MQTest_User" agentapp
sudo /usr/bin/passwd agentapp
sudo /usr/sbin/usermod -g users -G "" agentapp

SET AUTHREC OBJTYPE(QMGR) PRINCIPAL('agentapp') AUTHADD(ALLMQI)    
SET AUTHREC PROFILE(Q1) OBJTYPE(QUEUE) PRINCIPAL('agentapp') AUTHADD(ALLMQI)
SET AUTHREC PROFILE(APP.REPLIES.*) OBJTYPE(QUEUE) PRINCIPAL('agentapp') AUTHADD(ALL)
SET AUTHREC PROFILE(DEV.APP.MODEL.QUEUE) OBJTYPE(QUEUE) PRINCIPAL('agentapp') AUTHADD(All)

ALTER CHANNEL(MQAPP.SVRCONN) CHLTYPE(SVRCONN) MCAUSER('agentapp')
ALTER CHANNEL(MQAPP.SVRCONN) CHLTYPE(SVRCONN) SSLCAUTH(OPTIONAL)


REFRESH SECURITY

DEFINE TOPIC('tickets') TOPICSTR('tickets')

SET AUTHREC PROFILE('tickets') OBJTYPE(TOPIC) PRINCIPAL('agentapp') AUTHADD(ALLMQI)

